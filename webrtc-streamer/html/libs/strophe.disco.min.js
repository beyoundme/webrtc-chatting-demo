/**
 * Minified by jsDelivr using UglifyJS v3.3.22.
 * Original file: /npm/strophejs-plugin-disco@0.0.2/lib/strophe.disco.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("strophe.js")):"function"==typeof define&&define.amd?define(["strophe.js"],e):e(t.window)}(this,function(u){"use strict";u.Strophe.addConnectionPlugin("disco",{_connection:null,_identities:[],_features:[],_items:[],init:function(t){this._connection=t,this._identities=[],this._features=[],this._items=[],t.addHandler(this._onDiscoInfo.bind(this),u.Strophe.NS.DISCO_INFO,"iq","get",null,null),t.addHandler(this._onDiscoItems.bind(this),u.Strophe.NS.DISCO_ITEMS,"iq","get",null,null)},addIdentity:function(t,e,i,n){for(var s=0;s<this._identities.length;s++)if(this._identities[s].category==t&&this._identities[s].type==e&&this._identities[s].name==i&&this._identities[s].lang==n)return!1;return this._identities.push({category:t,type:e,name:i,lang:n}),!0},addFeature:function(t){for(var e=0;e<this._features.length;e++)if(this._features[e]==t)return!1;return this._features.push(t),!0},removeFeature:function(t){for(var e=0;e<this._features.length;e++)if(this._features[e]===t)return this._features.splice(e,1),!0;return!1},addItem:function(t,e,i,n){return!(i&&!n)&&(this._items.push({jid:t,name:e,node:i,call_back:n}),!0)},info:function(t,e,i,n,s){var r={xmlns:u.Strophe.NS.DISCO_INFO};e&&(r.node=e);var o=u.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",r);this._connection.sendIQ(o,i,n,s)},items:function(t,e,i,n,s){var r={xmlns:u.Strophe.NS.DISCO_ITEMS};e&&(r.node=e);var o=u.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",r);this._connection.sendIQ(o,i,n,s)},_buildIQResult:function(t,e){var i=t.getAttribute("id"),n=t.getAttribute("from"),s=u.$iq({type:"result",id:i});return null!==n&&s.attrs({to:n}),s.c("query",e)},_onDiscoInfo:function(t){var e,i=t.getElementsByTagName("query")[0].getAttribute("node"),n={xmlns:u.Strophe.NS.DISCO_INFO};i&&(n.node=i);var s=this._buildIQResult(t,n);for(e=0;e<this._identities.length;e++)n={category:this._identities[e].category,type:this._identities[e].type},this._identities[e].name&&(n.name=this._identities[e].name),this._identities[e].lang&&(n["xml:lang"]=this._identities[e].lang),s.c("identity",n).up();for(e=0;e<this._features.length;e++)s.c("feature",{var:this._features[e]}).up();return this._connection.send(s.tree()),!0},_onDiscoItems:function(t){var e,i,n={xmlns:u.Strophe.NS.DISCO_ITEMS},s=t.getElementsByTagName("query")[0].getAttribute("node");if(s){for(n.node=s,e=[],i=0;i<this._items.length;i++)if(this._items[i].node==s){e=this._items[i].call_back(t);break}}else e=this._items;var r=this._buildIQResult(t,n);for(i=0;i<e.length;i++){var o={jid:e[i].jid};e[i].name&&(o.name=e[i].name),e[i].node&&(o.node=e[i].node),r.c("item",o).up()}return this._connection.send(r.tree()),!0}})});
//# sourceMappingURL=/sm/d7936bb6af983cbe306d98c2f5046a8c25cabfe5c7991e8f9d503a857db4bb4e.map